{{/* https://github.com/gohugoio/hugo/blob/487b8e3af3cfe583e4c369b0bc72135e01b058df/tpl/tplimpl/embedded/templates/_partials/opengraph.html */}}
<meta property="og:url" content="{{ .Permalink }}">

{{- with or site.Title site.Params.title | plainify }}
	<meta property="og:site_name" content="{{ . }}">
{{- end }}

{{- with or .Title site.Title site.Params.title | plainify }}
	<meta property="og:title" content="{{ . }}">
{{- end }}

{{- with or .Description .Summary site.Params.description | plainify | htmlUnescape }}
	<meta property="og:description" content="{{ trim . "\n\r\t " }}">
{{- end }}

{{- with or .Params.locale site.Language.LanguageCode }}
	<meta property="og:locale" content="{{ replace . `-` `_` }}">
{{- end }}

{{- if .IsPage }}
	<meta property="og:type" content="article">
	{{- with .Section }}
		<meta property="article:section" content="{{ . }}">
	{{- end }}
	{{- $ISO8601 := "2006-01-02T15:04:05-07:00" }}
	{{- with .PublishDate }}
		<meta property="article:published_time" {{ .Format $ISO8601 | printf "content=%q" | safeHTMLAttr }}>
	{{- end }}
	{{- with .Lastmod }}
		<meta property="article:modified_time" {{ .Format $ISO8601 | printf "content=%q" | safeHTMLAttr }}>
	{{- end }}
	{{- range .GetTerms "tags" | first 6 }}
		<meta property="article:tag" content="{{ .Page.Title | plainify }}">
	{{- end }}
{{- else }}
	<meta property="og:type" content="website">
{{- end }}

{{- with partial "_funcs/get-page-images" . }}
	{{- range . | first 6 }}
		<meta property="og:image" content="{{ .Permalink }}">
	{{- end }}
{{- end }}

{{- with .Params.audio }}
	{{- range . | first 6 }}
		<meta property="og:audio" content="{{ . | absURL }}">
	{{- end }}
{{- end }}

{{- with .Params.videos }}
	{{- range . | first 6 }}
		<meta property="og:video" content="{{ . | absURL }}">
	{{- end }}
{{- end }}

{{- range .GetTerms "series" }}
	{{- range .Pages | first 7 }}
		{{- if ne $ . }}
			<meta property="og:see_also" content="{{ .Permalink }}">
		{{- end }}
	{{- end }}
{{- end }}

{{- with site.Params.social }}
	{{- if reflect.IsMap . }}
		{{- with .facebook_app_id }}
			<meta property="fb:app_id" content="{{ . }}">
		{{- else }}
			{{- with .facebook_admin }}
				<meta property="fb:admins" content="{{ . }}">
			{{- end }}
		{{- end }}
	{{- end }}
{{- end }}

{{/* https://github.com/gohugoio/hugo/blob/487b8e3af3cfe583e4c369b0bc72135e01b058df/tpl/tplimpl/embedded/templates/_partials/twitter_cards.html */}}
{{- $images := partial "_funcs/get-page-images" . }}
{{- with index $images 0 }}
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:image" content="{{ .Permalink }}">
{{- else }}
	<meta name="twitter:card" content="summary">
{{- end }}

{{- with or .Title site.Title site.Params.title | plainify }}
	<meta name="twitter:title" content="{{ . }}">
{{- end }}

{{- with or .Description .Summary site.Params.description | plainify | htmlUnescape }}
	<meta name="twitter:description" content="{{ trim . "\n\r\t " }}">
{{- end }}

{{- $twitterSite := "" }}
{{- with site.Params.social }}
	{{- if reflect.IsMap . }}
		{{- with .twitter }}
			{{- $content := . }}
			{{- if not (strings.HasPrefix . "@") }}
				{{- $content = printf "@%v" . }}
			{{- end }}
			<meta name="twitter:site" content="{{ $content }}">
		{{- end }}
	{{- end }}
{{- end }}

{{/* imageSocial */}}
{{- with index $images 0 }}
{{- else }}
	{{- with site.Params.imageSocial }}
		{{- $socialImage := "" }}
		{{- if or (strings.HasPrefix . "http:") (strings.HasPrefix . "https:") }}
			{{- $socialImage = resources.GetRemote . }}
		{{- else }}
			{{- $socialImage = resources.Get . }}
		{{- end }}
		{{- with $socialImage }}
			<meta name="twitter:image" content="{{ .RelPermalink | absURL }}">
			<meta property="og:image" content="{{ .RelPermalink | absURL }}">
		{{- end }}
	{{- end }}
{{- end }}
